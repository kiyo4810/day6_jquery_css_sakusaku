<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<head>
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
    <title>22-レスポンシブデザインでサイズ変更時のエフェクト</title>
</head>
<body>
<header>
    <h1>MdN - ツールボックス</h1>
    <h2>画像読み込み、レスポンシブ</h2>
</header>
<div id="viewArea">
    <div class="container" id="container">
        <div id="itemContainer">
            <img class="item" src="images/001.jpg" />
            <img class="item" src="images/002.jpg" />
            <img class="item" src="images/003.jpg" />
            <img class="item" src="images/004.jpg" />
            <img class="item" src="images/005.jpg" />
            <img class="item" src="images/006.jpg" />
            <img class="item" src="images/007.jpg" />
            <img class="item" src="images/008.jpg" />
            <img class="item" src="images/009.jpg" />
            <img class="item" src="images/010.jpg" />
            <img class="item" src="images/011.jpg" />
            <img class="item" src="images/012.jpg" />
            <img class="item" src="images/013.jpg" />
            <img class="item" src="images/014.jpg" />
        </div>
<div id="yohaku"></div>
    </div>
</div>
<nav id="page-nav">
    <a href="./imageload2.html"></a>
</nav>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/common/javascripts/jquery.min.js"><\/script>')</script>
    <script src="javascripts/jquery.masonry.min.js" ></script>
    <script src="javascripts/jquery.infinitescroll.js" ></script>
    <script>
        $(function () {
            var $container = $('#itemContainer');

            $container.masonry({
                itemSelector : '.item', // 対象要素
                columnWidth : 10, // 各要素間の横幅
                isAnimated: true, // アニメーションの有無
                isFitWidth: false, // センタリングの有無
                isResizable: true // レスポンシブの有無
            });

            var images = [];

            // masonryの設定
            $container.imagesLoaded(function(){
                $container.masonry({
                    itemSelector: '.item'
                });
            });

            // infinitescrollの設定これで一番までいった際に画像追加
            $container.infinitescroll({
                        debug           : false,
                        nextSelector : '#page-nav a',  // 一番まで来た際に追加表示する次のページのリンク
                        navSelector  : '#page-nav',    // 一番まで来た際に追加表示する次のページ
                        itemSelector : '.item',     // selector for all items you'll retrieve
                        loading: {
                            finishedMsg: 'No more pages to load.', // 次のページが存在しない場合のメッセージ
                            img: 'http://i.imgur.com/6RMhx.gif' //　次のページを読み込みしている間のロードイメージ
                        },
                        bufferPx:300 // 一番下判定の余裕
                    },
                    // 次のページ要素表示時の処理
                    function( newElements ) {
                        var $newElems = $( newElements ).css({ opacity: 0 });
                        // gazou wo
                        // 画像を読み込んでから表示する。
                        $newElems.imagesLoaded(function(){
                            $newElems.animate({ opacity: 1 });
                            $container.masonry( 'appended', $newElems, true );
                        });
                    }
            );
        });
    </script>
</body>
</html>