<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta charset="utf-8" />
    <title>41-Gmap3を活用したGoogleマップのカスタマイズ</title>
    <link rel="stylesheet" href="./styles/styles.css" type="text/css" />
</head>
<body>
    <header>
        <h1>MdN - ツールボックス</h1>
        <h2>GoogleMap</h2>
    </header>
    <div class="container">
        出発地点 : <input type="text" id="origins" /> 
        目的地 : <input type="text" id="destinations" /> 
        <a onclick="distance();" id="distance" class="wbp-small yellow">検索</a>
        <br /><br />
        <div id="GoogleMap" >
        </div>
    </div>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/common/javascripts/jquery.min.js"><\/script>')</script>    
    <script type="text/javascript" src="./javascripts/gmap3.min.js"></script>
    <script type="text/javascript">
    function distance(){
        $("#GoogleMap").gmap3({ 
            getroute:{
                options:{
                    origin:$("#origins").val(),
                    destination:$("#destinations").val(),
                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                },
                callback: function(GoogleMap){
                    if (!GoogleMap) return;
                    $(this).gmap3({
                        map:{
                            options:{
                                zoom: 13
                            }
                        },
                        directionsrenderer:{
                            container: $(document.createElement("div")).insertAfter($("#GoogleMap")),
                            options:{
                                directions:GoogleMap
                            }
                        }
                    });
                }
            }
        });
    }
    </script>  
</body>
</html>